---
Description: The thread pool application programming interface (API) uses an object-based design.
ms.assetid: c8656469-a273-4838-aa1a-86140b0cd0a2
title: Thread Pool API
ms.topic: article
ms.date: 05/31/2018
---

# Thread Pool API

The thread pool application programming interface (API) uses an object-based design. Each of the following objects is represented by a user-mode data structure:

-   A pool object is a set of worker threads that can be used to perform work. Each process can create multiple isolated pools with different characteristics as necessary. There is also a default pool for each process.
-   A clean-up group is associated with a set of callback-generating objects. Functions exists to wait on and release all objects that are members of each clean-up group. This frees the application from keeping track of all the objects it has created.
-   A work object is assigned to a pool and optionally to a clean-up group. It can be posted, causing a worker thread from the pool to execute its callback. A work object can have multiple posts outstanding; each generates a callback. The post operation cannot fail due to lack of resources.
-   A timer object controls the scheduling of callbacks. Each time a timer expires, its callback is posted to its worker pool. Setting a timer cannot fail due to lack of resources.
-   A wait object causes a waiter thread to wait on a waitable handle. After the wait is satisfied or the time-out period expires, the waiter thread posts the wait objects' callback to the wait's worker pool. Setting a wait cannot fail due to lack of resources.
-   An I/O object associates a file handle with the I/O completion port for the thread pool. When an asynchronous I/O operation completes, a worker thread picks up the status of the operation and calls the I/O object's callback.

The following table describes the features of the original and current thread pool APIs.



| Feature              | Original API                                                                                                                                                                                                                                                                                                                   | Current API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Synch                | [**RegisterWaitForSingleObject**](https://msdn.microsoft.com/en-us/library/ms685061(v=VS.85).aspx)<br/> [**UnregisterWaitEx**](https://msdn.microsoft.com/en-us/library/ms686876(v=VS.85).aspx)<br/>                                                                                                                                                                                        | [**CloseThreadpoolWait**](https://msdn.microsoft.com/en-us/library/ms682042(v=VS.85).aspx)<br/> [**CreateThreadpoolWait**](https://msdn.microsoft.com/en-us/library/ms682474(v=VS.85).aspx)<br/> [**SetThreadpoolWait**](https://msdn.microsoft.com/en-us/library/ms686273(v=VS.85).aspx)<br/> [**WaitForThreadpoolWaitCallbacks**](https://msdn.microsoft.com/en-us/library/ms687047(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                                                                                                   |
| Work                 | [**QueueUserWorkItem**](https://msdn.microsoft.com/en-us/library/ms684957(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                                                      | [**CloseThreadpoolWork**](https://msdn.microsoft.com/en-us/library/ms682043(v=VS.85).aspx)<br/> [**CreateThreadpoolWork**](https://msdn.microsoft.com/en-us/library/ms682478(v=VS.85).aspx)<br/> [**SubmitThreadpoolWork**](https://msdn.microsoft.com/en-us/library/ms686338(v=VS.85).aspx)<br/> [**TrySubmitThreadpoolCallback**](https://msdn.microsoft.com/en-us/library/ms686862(v=VS.85).aspx)<br/> [**WaitForThreadpoolWorkCallbacks**](https://msdn.microsoft.com/en-us/library/ms687053(v=VS.85).aspx)<br/>                                                                                                                                                                                                                               |
| Timer                | [**CreateTimerQueue**](https://msdn.microsoft.com/en-us/library/ms682483(v=VS.85).aspx)<br/> [**CreateTimerQueueTimer**](https://msdn.microsoft.com/en-us/library/ms682485(v=VS.85).aspx)<br/> [**ChangeTimerQueueTimer**](https://msdn.microsoft.com/en-us/library/ms682004(v=VS.85).aspx)<br/> [**DeleteTimerQueueTimer**](https://msdn.microsoft.com/en-us/library/ms682569(v=VS.85).aspx)<br/> [**DeleteTimerQueueEx**](https://msdn.microsoft.com/en-us/library/ms682568(v=VS.85).aspx)<br/> | [**CloseThreadpoolTimer**](https://msdn.microsoft.com/en-us/library/ms682040(v=VS.85).aspx)<br/> [**CreateThreadpoolTimer**](https://msdn.microsoft.com/en-us/library/ms682466(v=VS.85).aspx)<br/> [**IsThreadpoolTimerSet**](https://msdn.microsoft.com/en-us/library/ms684133(v=VS.85).aspx)<br/> [**SetThreadpoolTimer**](https://msdn.microsoft.com/en-us/library/ms686271(v=VS.85).aspx)<br/> [**WaitForThreadpoolTimerCallbacks**](https://msdn.microsoft.com/en-us/library/ms687042(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                           |
| I/O                  | [**BindIoCompletionCallback**](/windows/desktop/api/WinBase/nf-winbase-bindiocompletioncallback)<br/>                                                                                                                                                                                                                                                        | [**CancelThreadpoolIo**](https://msdn.microsoft.com/en-us/library/ms681983(v=VS.85).aspx)<br/> [**CloseThreadpoolIo**](https://msdn.microsoft.com/en-us/library/ms682038(v=VS.85).aspx)<br/> [**CreateThreadpoolIo**](https://msdn.microsoft.com/en-us/library/ms682464(v=VS.85).aspx)<br/> [**StartThreadpoolIo**](https://msdn.microsoft.com/en-us/library/ms686326(v=VS.85).aspx)<br/> [**WaitForThreadpoolIoCallbacks**](https://msdn.microsoft.com/en-us/library/ms687038(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                                                   |
| Clean-up group       |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolCleanupGroup**](https://msdn.microsoft.com/en-us/library/ms682033(v=VS.85).aspx)<br/> [**CloseThreadpoolCleanupGroupMembers**](https://msdn.microsoft.com/en-us/library/ms682036(v=VS.85).aspx)<br/> [**CreateThreadpoolCleanupGroup**](https://msdn.microsoft.com/en-us/library/ms682462(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                                                                                                                     |
| Pool                 |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpool**](https://msdn.microsoft.com/en-us/library/ms682030(v=VS.85).aspx)<br/> [**CreateThreadpool**](https://msdn.microsoft.com/en-us/library/ms682456(v=VS.85).aspx)<br/> [**SetThreadpoolThreadMaximum**](https://msdn.microsoft.com/en-us/library/ms686266(v=VS.85).aspx)<br/> [**SetThreadpoolThreadMinimum**](https://msdn.microsoft.com/en-us/library/ms686268(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                                                                                                         |
| Callback environment |                                                                                                                                                                                                                                                                                                                                | [**DestroyThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-destroythreadpoolenvironment)<br/> [**InitializeThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-initializethreadpoolenvironment)<br/> [**SetThreadpoolCallbackCleanupGroup**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackcleanupgroup)<br/> [**SetThreadpoolCallbackLibrary**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbacklibrary)<br/> [**SetThreadpoolCallbackPool**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpool)<br/> [**SetThreadpoolCallbackPriority**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpriority)<br/> [**SetThreadpoolCallbackRunsLong**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackrunslong)<br/> |
| Callback             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](https://msdn.microsoft.com/en-us/library/ms681981(v=VS.85).aspx)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Callback clean up    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](https://msdn.microsoft.com/en-us/library/ms682581(v=VS.85).aspx)<br/> [**FreeLibraryWhenCallbackReturns**](https://msdn.microsoft.com/en-us/library/ms683154(v=VS.85).aspx)<br/> [**LeaveCriticalSectionWhenCallbackReturns**](https://msdn.microsoft.com/en-us/library/ms684171(v=VS.85).aspx)<br/> [**ReleaseMutexWhenCallbackReturns**](https://msdn.microsoft.com/en-us/library/ms685070(v=VS.85).aspx)<br/> [**ReleaseSemaphoreWhenCallbackReturns**](https://msdn.microsoft.com/en-us/library/ms685073(v=VS.85).aspx)<br/> [**SetEventWhenCallbackReturns**](https://msdn.microsoft.com/en-us/library/ms686214(v=VS.85).aspx)<br/>                                 |



 

## Related topics

<dl> <dt>

[Thread Pools](thread-pools.md)
</dt> <dt>

[Using the Thread Pool Functions](using-the-thread-pool-functions.md)
</dt> </dl>

 

 




